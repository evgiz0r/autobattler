<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1v1 Autobattler</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="game-container">
        <div id="first-unit-message">Place Your First Unit!</div>
        <div id="ui-top">
            <div id="player-stats">
                <h3 style="font-size: 14px; margin-bottom: 8px;">Player</h3>
                <button id="pause-btn" class="control-btn">Pause</button>
                <button id="restart-btn" class="control-btn">Restart</button>
                <div style="margin-top: 4px; display: flex; gap: 3px; max-width: 120px;">
                    <button class="speed-btn active" data-speed="1">x1</button>
                    <button class="speed-btn" data-speed="2">x2</button>
                    <button class="speed-btn" data-speed="3">x3</button>
                </div>
                <button id="ai-vs-ai-btn" class="control-btn">AI vs AI</button>
                <button id="infinite-mode-btn" class="control-btn">Infinite Mode: OFF</button>
                <button id="target-lines-btn" class="control-btn">Hide Target Lines</button>
                <button id="sound-toggle-btn" class="control-btn">Sound: ON</button>
            </div>
            <div id="ai-stats">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                    <h3 style="font-size: 14px; margin: 0;">AI Settings</h3>
                    <button id="ai-settings-toggle" class="toggle-btn">â–¼</button>
                </div>
                <div id="ai-settings-content" style="display: none;">
                    <div style="margin-bottom: 8px;">
                        <label style="font-size: 10px; display: block; margin-bottom: 3px;">Difficulty:</label>
                        <div id="difficulty-selector">
                            <button class="difficulty-btn" data-difficulty="EASY">Easy</button>
                            <button class="difficulty-btn active" data-difficulty="MEDIUM">Medium</button>
                            <button class="difficulty-btn" data-difficulty="HARD">Hard</button>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 10px; display: block; margin-bottom: 3px;">Enemy AI:</label>
                    <div id="ai-strategy-selector" style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px;">
                        <button class="ai-strategy-btn active" data-strategy="RANDOM">Random</button>
                        <button class="ai-strategy-btn" data-strategy="SPAM_ONLY">Swarm</button>
                        <button class="ai-strategy-btn" data-strategy="AGGRESSIVE_UPGRADE">Perfectionist</button>
                        <button class="ai-strategy-btn" data-strategy="RANGED_SPECIALIST">Sniper</button>
                        <button class="ai-strategy-btn" data-strategy="MELEE_SPECIALIST">Juggernaut</button>
                        <button class="ai-strategy-btn" data-strategy="CASTER_SPECIALIST">Archmage</button>
                        <button class="ai-strategy-btn" data-strategy="SUPPORT_SPECIALIST">Guardian</button>
                        <button class="ai-strategy-btn" data-strategy="NOOB">Noob</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-board">
            <div class="zone-container">
                <div class="zone-health">
                    Lives: <span id="player-lives" class="lives-number">100</span>
                    <span id="player-boost" class="boost-indicator"></span>
                </div>
                <div class="zone-gold">
                    <span>Gold: <span id="player-gold" class="gold-number">50</span></span>
                    <button id="economy-upgrade-btn" class="economy-btn" disabled>+1g/s (50g)</button>
                </div>
                <div id="player-zone" class="zone">
                    <h4 id="player-zone-label">Build Area</h4>
                </div>
            </div>
            <div class="zone-container">
                <div class="battle-info">
                    <span class="round-display">Round: <span id="round-number">0</span></span>
                    <span class="timer-display">Next: <span id="round-timer">10</span>s</span>
                </div>
                <div id="battle-zone" class="zone">
                </div>
            </div>
            <div class="zone-container">
                <div class="zone-health">
                    Lives: <span id="ai-lives" class="lives-number">100</span>
                    <span id="ai-boost" class="boost-indicator"></span>
                </div>
                <div class="zone-gold">Gold: <span id="ai-gold" class="gold-number">50</span><span style="visibility: hidden;" class="economy-btn">Placeholder</span></div>
                <div id="ai-zone" class="zone">
                    <h4 id="ai-zone-label">AI</h4>
                </div>
            </div>
        </div>

        <div id="ui-bottom">
            <div class="shops-container">
                <div id="player-shop" class="shop-section">
                    <h3>Player Shop</h3>
                    <div class="units-grid"></div>
                </div>
                <div id="ai-shop" class="shop-section">
                    <h3>AI Shop</h3>
                    <div class="units-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load scripts in dependency order -->
    <!-- Config and data -->
    <script src="js/config/gameConfig.js"></script>
    <script src="js/config/unitDefinitions.js"></script>
    
    <!-- Utilities -->
    <script src="js/utils/MathUtils.js"></script>
    
    <!-- Core systems -->
    <script src="js/systems/BattleContext.js"></script>
    <script src="js/systems/MovementSystem.js"></script>
    <script src="js/systems/ProjectileSystem.js"></script>
    <script src="js/systems/CombatSystem.js"></script>
    <script src="js/systems/StatsManager.js"></script>
    
    <!-- Behavior system -->
    <script src="js/systems/behaviors/UnitBehavior.js"></script>
    <script src="js/systems/behaviors/MeleeBehavior.js"></script>
    <script src="js/systems/behaviors/RangedBehavior.js"></script>
    <script src="js/systems/behaviors/CasterBehavior.js"></script>
    <script src="js/systems/behaviors/HealerBehavior.js"></script>
    
    <!-- Game systems -->
    <script src="js/systems/SoundSystem.js"></script>
    <script src="js/classes/Unit.js"></script>
    <script src="js/ui/rendering.js"></script>
    <script src="js/systems/economy.js"></script>
    <script src="js/systems/spawning.js"></script>
    <script src="js/systems/ai.js"></script>
    <script src="js/systems/BattleSystem.js"></script>
    <script src="js/ui/shopManager.js"></script>
    <script src="js/ui/uiManager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
